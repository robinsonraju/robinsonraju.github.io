<!DOCTYPE html>
<html lang="en" data-theme="light"><head>
    <title> Robinson Raju Varghese | A Simple MapReduce Job for Iris Dataset </title>
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.69.2" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="Robinson Raju Varghese">
    
    <link rel="stylesheet" href="https://robinsonraju.info/css/style.min.b6c554f4f9d911e32a32cfbcdbf23c92fb43a8982b065ba0c097ffc57df28ea7.css" integrity="sha256-tsVU9PnZEeMqMs&#43;82/I8kvtDqJgrBlugwJf/xX3yjqc=" crossorigin="anonymous" type="text/css">
    
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    
    <link rel="shortcut icon" href="https://robinsonraju.info/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://robinsonraju.info/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://robinsonraju.info/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://robinsonraju.info/favicons/favicon-16x16.png">
    <link rel="canonical" href="https://robinsonraju.info/tech-notes/2015-09-30-mapreducejob-iris/">
    
    
    <script type="text/javascript" src="https://robinsonraju.info/js/anatole-header.min.c275265a259296f3dd50e8236a77fcbcadb1dbb9597d3045c675dcc2c7c58a93.js" integrity="sha256-wnUmWiWSlvPdUOgjanf8vK2x27lZfTBFxnXcwsfFipM=" crossorigin="anonymous"></script>
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A Simple MapReduce Job for Iris Dataset"/>
<meta name="twitter:description" content="This blog is an attempt to walk through the process of using hadoop to analyze a dataset that might look similar to an actual dataset that we might encounter."/>

</head><body><div class="sidebar animated fadeInDown">
    <div class="logo-title">
      <div class="title">
        <img src="https://robinsonraju.info/images/profile.jpeg" alt="profile picture">
        <h3 title=""><a href="/">Rob&#39;s Notes</a></h3>
        <div class="description">
          <p>Robinson Raju Varghese</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
        
        <li>
        <a href="https://linkedin.com/in/robinsonraju" rel="me" aria-label="Linkedin">
          <i class="fa fa-2x fa-linkedin" aria-hidden="true"></i>
        </a>          
        </li>

        
        <li>
        <a href="https://github.com/robinsonraju" rel="me" aria-label="GitHub">
          <i class="fa fa-2x fa-github" aria-hidden="true"></i>
        </a>          
        </li>

        
        <li>
        <a href="https://instagram.com/luminous_infinitus" rel="me" aria-label="instagram">
          <i class="fa fa-2x fa-instagram" aria-hidden="true"></i>
        </a>          
        </li>

        
        <li>
        <a href="mailto:robinson.raju@gmail.com" rel="me" aria-label="e-mail">
          <i class="fa fa-2x fa-envelope" aria-hidden="true"></i>
        </a>          
        </li>

        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; Robinson Raju Varghese 2020 </div>
      </div>
    </div>
</div><div class="main">
            <div class="page-top animated fadeInDown">
    <ul class="nav">
        
        
        
        <li><a  href="/" title="">Home</a></li>
        
        
        <li><a  href="/categories/blog/" title="">Blog</a></li>
        
        
        <li><a  href="/about/" title="About">About</a></li>
        
    </ul>
    
</div>

            <div class="autopagerize_page_element">
                <div class="content">
<div class="post animated fadeInDown">
  <div class="divTable">
    <div class="divTableBody">
      <div class="divTableRow">
        <main>
          <div class="divTableCell" >
            <div class="post-content">
              <div class="post-title">
                <h3>A Simple MapReduce Job for Iris Dataset</h3>
                  
                    <h4></h4>
                    <div class="info">
                      <i class="fa fa-sun-o"></i><span class="date">Wed, Sep 30, 2015</span>
                      <i class="fa fa-clock-o"></i><span class="reading-time">2-minute read</span>
                    </div>
                  
              </div>
              <p>This blog is an attempt to walk through the process of using hadoop to analyze a dataset that might look similar to an actual dataset that we might encounter.</p>
<p>The objective is to read data from Iris dataset - <a href="https://archive.ics.uci.edu/ml/datasets/Iris">https://archive.ics.uci.edu/ml/datasets/Iris</a> and calculate the mean sepal length of each class of the flower.</p>
<p>The data is here -&gt; <a href="https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data">https://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data</a>.</p>
<p>Sample record : <code>5.1,3.5,1.4,0.2,Iris-setosa</code></p>
<p>Attribute Information:</p>
<ol>
<li>sepal length in cm</li>
<li>sepal width in cm</li>
<li>petal length in cm</li>
<li>petal width in cm</li>
<li>class: a) Iris Setosa, b) Iris Versicolour, c) Iris Virginica</li>
</ol>
<p>In the last blog on wordcount, I used an eclipse project that was bundled automatically with the Cloudera VM and just modified the StubMapper, StubReducer and Driver to plugin the code for wordcount. In this, I thought I&rsquo;ll create one from scratch and see how it works.</p>
<h2 id="step-1--create-a-java-project">Step #1 : Create a Java project</h2>
<p>Create a Java project using Eclipse.
Add Mapper, Reducer and Driver stubs from the other project. You&rsquo;ll immediately notice that there are many compilation errors.</p>
<h2 id="step-2-configure-build-path">Step 2: Configure Build Path</h2>
<p>Add the following libraries from <code>/usr/lib/hadoop/client</code> and <code>/cloudera/lib</code></p>
<p><code>Properties &gt; Java Build Path &gt; Add External Jars</code></p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Also add <code>&lt;project&gt;/conf</code> as the class folder.</p>
<!-- raw HTML omitted -->
<p>Now the compilation issues would be resolved.</p>
<h2 id="step-3-add-code-for-mapper-and-reducer">Step 3: Add code for Mapper and Reducer</h2>
<p>The objective is to read the records from the data and compute the mean sepal length of each class of the Iris flower.
map() function in the Mapper gets each row and splits the columns to extract out the key (flower class) and the value (sepal length).
The reduce() function is the Reducer is simple as well. It iterates through the values for each key, computes sum, maintains count and computes mean after the loop ends.</p>
<h3 id="mapper">Mapper</h3>
<pre><code>package com.iris.data.mapreduce;
import java.io.IOException;

import org.apache.hadoop.io.FloatWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Mapper;

public class IrisMapper extends Mapper&lt;LongWritable, Text, Text, FloatWritable&gt; {

    @Override
    public void map(LongWritable key, Text value, Context context)
            throws IOException, InterruptedException {

        String[] columns = value.toString().split(&quot;,&quot;);
        float sepal_len = Float.valueOf(columns[0]);
        String flower_class = columns[4];

        context.write(new Text(flower_class), new FloatWritable(sepal_len));
    }
}
</code></pre>
<h3 id="reducer">Reducer</h3>
<pre><code>package com.iris.data.mapreduce;
import java.io.IOException;

import org.apache.hadoop.io.FloatWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Reducer;

public class IrisReducer extends
        Reducer&lt;Text, FloatWritable, Text, FloatWritable&gt; {

    @Override
    public void reduce(Text key, Iterable&lt;FloatWritable&gt; values, Context context)
            throws IOException, InterruptedException {

        float sum = 0;
        float count = 0;
        float mean_sepal_len = 0;
        for (FloatWritable val : values) {
            sum += val.get();
            count++;
        }

        mean_sepal_len = sum / count;
        context.write(key, new FloatWritable(mean_sepal_len));
    }

}
</code></pre>
<h2 id="run-the-driver">Run the Driver</h2>
<p>You should see the following output</p>
<!-- raw HTML omitted -->
<p><em>Header Image - &ldquo;<strong>Iris</strong>&rdquo; by Pauline Rosenberg via <a href="https://flic.kr/p/6sZzjm">Flickr</a>.</em></p>

            </div>
            <div class="post-footer">
              <div class="info">
                
<span class="separator"><a class="category" href="/categories/technical-notes/">Technical Notes</a><a class="category" href="/categories/blog/">Blog</a></span>

                
              </div>
            </div>
              
          </div>
          <nav class="divTableCell section-nav">
            <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="https://robinsonraju.info/tech-notes/2015-09-30-mapreducejob-iris/#step-1--create-a-java-project">Step #1 : Create a Java project</a></li>
    <li><a href="https://robinsonraju.info/tech-notes/2015-09-30-mapreducejob-iris/#step-2-configure-build-path">Step 2: Configure Build Path</a></li>
    <li><a href="https://robinsonraju.info/tech-notes/2015-09-30-mapreducejob-iris/#step-3-add-code-for-mapper-and-reducer">Step 3: Add code for Mapper and Reducer</a>
      <ul>
        <li><a href="https://robinsonraju.info/tech-notes/2015-09-30-mapreducejob-iris/#mapper">Mapper</a></li>
        <li><a href="https://robinsonraju.info/tech-notes/2015-09-30-mapreducejob-iris/#reducer">Reducer</a></li>
      </ul>
    </li>
    <li><a href="https://robinsonraju.info/tech-notes/2015-09-30-mapreducejob-iris/#run-the-driver">Run the Driver</a></li>
  </ul>
</nav>
            </div>
          </nav>
        </main>
      </div>
    </div>
  </div>
</div>


                </div>
            </div>
        </div>
</body>



<script type="text/javascript" src="https://robinsonraju.info/js/jquery.min.86b1e8f819ee2d9099a783e50b49dff24282545fc40773861f9126b921532e4c.js" integrity="sha256-hrHo&#43;BnuLZCZp4PlC0nf8kKCVF/EB3OGH5EmuSFTLkw=" crossorigin="anonymous"></script>




<script type="text/javascript" src="https://robinsonraju.info/js/bundle.min.0f9c74cb78f13d1f15f33daff4037c70354f98acfbb97a6f61708966675c3cae.js" integrity="sha256-D5x0y3jxPR8V8z2v9AN8cDVPmKz7uXpvYXCJZmdcPK4=" crossorigin="anonymous"></script>

<script type="text/javascript" src="https://robinsonraju.info/js/medium-zoom.min.92f21c856129f84aeb719459b3e6ac621a3032fd7b180a18c04e1d12083f8aba.js" integrity="sha256-kvIchWEp&#43;ErrcZRZs&#43;asYhowMv17GAoYwE4dEgg/iro=" crossorigin="anonymous"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-166342905-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</html></body>

</html>
