<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Starting to read up on blockchain. RV mentioned that I might need to learn Go if I need to tryout some HyperLedger frameworks in the future.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Baby steps on Go" />
<meta property="og:description" content="Starting to read up on blockchain. RV mentioned that I might need to learn Go if I need to tryout some HyperLedger frameworks in the future." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://robinsonraju.info/tech-notes/2020-05-31-golang-example/" />
<meta property="article:published_time" content="2020-05-31T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-05-31T00:00:00+00:00" /><meta property="og:site_name" content="Rob&#39;s Notes" />
<title>Baby steps on Go | Rob&#39;s Notes</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.da110f27d6a4d632dc8e162876b7216c5c1f82164fbdac7ff33021633767f034.css" integrity="sha256-2hEPJ9ak1jLcjhYodrchbFwfghZPvax/8zAhYzdn8DQ=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.5647c05755d2b18cc93fdc4f39abca5b0933598ce8475e1d51220402f1d393ef.js" integrity="sha256-VkfAV1XSsYzJP9xPOavKWwkzWYzoR14dUSIEAvHTk&#43;8=" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-166342905-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Rob&#39;s Notes</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  
















</nav>




  <script>(function(){var menu=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Baby steps on Go</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#installing-go">Installing Go</a></li>
    <li><a href="#sample-codebase">Sample Codebase</a></li>
    <li><a href="#setting-up-sample-codebase">Setting up sample codebase</a></li>
    <li><a href="#starting-the-server">Starting the server</a></li>
    <li><a href="#testing-the-api">Testing the API</a></li>
    <li><a href="#inspecting-the-codebase">Inspecting the codebase</a></li>
    <li><a href="#next-steps">Next steps</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><p>Starting to read up on blockchain. RV mentioned that I might need to learn <a href="https://golang.org/">Go</a> if I need to tryout some <a href="https://www.hyperledger.org/">HyperLedger frameworks</a> in the future. Go has a cool <a href="https://play.golang.org/">playground</a> to try things online and a <a href="https://tour.golang.org/welcome/1">tour</a> which teaches you basics.</p>
<p>Rather than looking at them, I wanted to look at some actual code and infer how things work. Most of the people in the Software industry learn things that way anyway. You take up a new project or a join a new team and the first thing that you do is to setup the codebase and figure your way around. In the past (say a decade back), setting up someone&rsquo;s codebase was the toughest thing. The first setup never worked and you had to actually get a help from one of the past developers to set some esoteric environment variable or have a specific folder structure or have specific versions of Java or some special dependencies. Maven simplified a lot of these dependency issues but still it was a struggle. But fast-forward to 2020, most repos have instructions on how to setup and they are pretty straight forward to setup even if there are no instructions.</p>
<p>Though I&rsquo;ve developed a lot of front-end applications over the years, my expertise has been backend services. So why not look at how to develop a simple REST API using golang? Was thinking of loading a small dataset like <a href="https://www.kaggle.com/bilalyussef/google-books-dataset">&lsquo;Books data&rsquo;</a> or <a href="https://archive.ics.uci.edu/ml/datasets/iris">&lsquo;Iris data&rsquo;</a>.</p>
<h2 id="installing-go">
  Installing Go
  <a class="anchor" href="#installing-go">#</a>
</h2>
<p>Installed Go from the golang website. <a href="https://golang.org/dl/">https://golang.org/dl/</a>.
Checked if it was installed.</p>
<pre class="cmd"><code>go version</code></pre>

<p>I got the response back as <code>go version go1.14.3 darwin/amd64</code></p>
<h2 id="sample-codebase">
  Sample Codebase
  <a class="anchor" href="#sample-codebase">#</a>
</h2>
<p>Searched <a href="https://github.com">github.com</a> and got the following go repos for &ldquo;bookdata&rdquo;. Looks like people are using this to learn Go.</p>

<link rel="stylesheet" href="/css/snap-gallery.css" /><figure >
  <div class="snap-wrapper">
    <a href="#fig1">
      <img src="/images/githubsearch-bookdata.png" class="snap-thumb" title="GitHub Search Bookdata"/>
    </a>
    <div class="snap-lightbox" id="fig1">
        <a href="#_" class="snap-lightbox-close"></a>
        <div class="snap-lightbox-inner">
          <img src="/images/githubsearch-bookdata.png"  />
          <p>
          </p>
        </div>
        <a href="#_" class="snap-lightbox-close-button"><i class="snap-lightbox-x"></i></a>
      </div></div>
</figure>

<p>The first application seems to be pretty good. It even has documentation on the API paths that are supported.</p>
<h2 id="setting-up-sample-codebase">
  Setting up sample codebase
  <a class="anchor" href="#setting-up-sample-codebase">#</a>
</h2>
<pre class="cmd"><code>git clone https://github.com/moficodes/bookdata-api.git</code></pre>

<p>I was assuming, and hoping that there should be no other setup that is needed.</p>
<h2 id="starting-the-server">
  Starting the server
  <a class="anchor" href="#starting-the-server">#</a>
</h2>
<pre class="cmd"><code>cd bookdata-api</code></pre>

<pre class="cmd"><code>go run .</code></pre>

<h2 id="testing-the-api">
  Testing the API
  <a class="anchor" href="#testing-the-api">#</a>
</h2>
<p>The documentation has the following REST APIs.
All api endpoints are prefixed with <code>/api/v1</code></p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">Get Books by Author
&#34;/books/authors/{author}&#34;
Optional query parameter for ratingAbove ratingBelow limit and skip

Get Books by BookName
&#34;/books/book-name/{bookName}&#34;
Optional query parameter for ratingAbove ratingBelow limit and skip

Get Book by ISBN
&#34;/book/isbn/{isbn}&#34;

Delete Book by ISBN
&#34;/book/isbn/{isbn}&#34;

Create New Book
&#34;/book&#34;
</code></pre></div><p>Looking at the dataset in <code>./assets/books.csv</code>, I wasn&rsquo;t sure if Author&rsquo;s names with spaces would work.</p>
<p>The first line in the dataset was this -</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">1,Harry Potter and the Half-Blood Prince (Harry Potter  #6),
J.K. Rowling-Mary GrandPr√©,4.56,0439785960,9780439785969,eng,652,1944099,26249
</code></pre></div><p>Decided to open up Postman and do a search using ISBN.</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">GET http://localhost:8080/api/v1/book/isbn/0439785960
</code></pre></div><p><strong>voila!</strong></p>
<p><img src="/images/postman-response.png" alt="postman-response" /></p>
<p>I was super surprised that it even worked the first time. Exciting stuff. Thanks to <code>moficodes</code> for creating this app and sharing it on github.</p>
<h2 id="inspecting-the-codebase">
  Inspecting the codebase
  <a class="anchor" href="#inspecting-the-codebase">#</a>
</h2>
<p>Many people think that reading through a codebase written in a language that you don&rsquo;t yet know, would not be possible. Definitely not! Programming languages are not like human languages. It is usually easy to figure out the simple stuff since the same patterns repeat everywhere, especially if you have been coding or reading code for sometime. Of course, the difficult stuff is not easy. Reading through a complex codebase might take time even if you have a decade or two of coding experience.</p>
<p>The codebase here seems quite simple enough.</p>
<ul>
<li>
<p><code>server.go</code> -&gt; Has a main function with all the API paths defined.</p>
</li>
<li>
<p><code>routes.go</code> -&gt; Has the functions called in server.go like &lsquo;searchByAuthor&rsquo;, &lsquo;searchByISBN&rsquo;, etc.</p>
</li>
<li>
<p><code>loader.go</code> in &lsquo;loader&rsquo; folder -&gt; Has the definition of BookData data structure and a function to load the data.
I&rsquo;d assume that this gets invoked during the server start.</p>
</li>
<li>
<p><code>memory.go</code> -&gt; Has initialize method which has code to load data from a file.</p>
</li>
</ul>
<p>There is no correlation between the filename and the classname as in Java. A file contains a <code>package</code> statement, similar to Java, <code>import</code> statement which has packages to be imported. The syntax for import is different but you get what it is trying to do. Most files seem to be a series of functions declared by the keyword <code>func</code>.</p>
<p><img src="/images/files-in-the-codebase.png" alt="files-in-the-codebase" /></p>
<p><img src="/images/main-function.png" alt="main-function" /></p>
<h2 id="next-steps">
  Next steps
  <a class="anchor" href="#next-steps">#</a>
</h2>
<p>The hard part of actually learning the language starts now. It is one thing to read a codebase and understand what it does and totally a different thing to be able to write or even do code reviews. As a next step, I&rsquo;ll go through the Tour and understand the basics.</p>
<hr>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function select(element){const selection=window.getSelection();const range=document.createRange();range.selectNodeContents(element);selection.removeAllRanges();selection.addRange(range);}
document.querySelectorAll("pre code").forEach(code=>{code.addEventListener("click",function(event){select(code.parentElement);if(navigator.clipboard){navigator.clipboard.writeText(code.parentElement.textContent);}});});})();</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#installing-go">Installing Go</a></li>
    <li><a href="#sample-codebase">Sample Codebase</a></li>
    <li><a href="#setting-up-sample-codebase">Setting up sample codebase</a></li>
    <li><a href="#starting-the-server">Starting the server</a></li>
    <li><a href="#testing-the-api">Testing the API</a></li>
    <li><a href="#inspecting-the-codebase">Inspecting the codebase</a></li>
    <li><a href="#next-steps">Next steps</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












