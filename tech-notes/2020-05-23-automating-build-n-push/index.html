<!DOCTYPE html>
<html lang="en" data-theme="light"><head>
    <title> Robinson Raju Varghese | Automating the Hugo build and push to GitHub </title>
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.69.2" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="Robinson Raju Varghese">
    
    <link rel="stylesheet" href="https://robinsonraju.info/css/style.min.b6c554f4f9d911e32a32cfbcdbf23c92fb43a8982b065ba0c097ffc57df28ea7.css" integrity="sha256-tsVU9PnZEeMqMs&#43;82/I8kvtDqJgrBlugwJf/xX3yjqc=" crossorigin="anonymous" type="text/css">
    
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    
    <link rel="shortcut icon" href="https://robinsonraju.info/favicons/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="https://robinsonraju.info/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://robinsonraju.info/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://robinsonraju.info/favicons/favicon-16x16.png">
    <link rel="canonical" href="https://robinsonraju.info/tech-notes/2020-05-23-automating-build-n-push/">
    
    
    <script type="text/javascript" src="https://robinsonraju.info/js/anatole-header.min.c275265a259296f3dd50e8236a77fcbcadb1dbb9597d3045c675dcc2c7c58a93.js" integrity="sha256-wnUmWiWSlvPdUOgjanf8vK2x27lZfTBFxnXcwsfFipM=" crossorigin="anonymous"></script>
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Automating the Hugo build and push to GitHub"/>
<meta name="twitter:description" content="Instead of remembering to build and push to GitHub, wanted to automate it."/>

</head><body><div class="sidebar animated fadeInDown">
    <div class="logo-title">
      <div class="title">
        <img src="https://robinsonraju.info/images/profile.jpeg" alt="profile picture">
        <h3 title=""><a href="/">Rob&#39;s Notes</a></h3>
        <div class="description">
          <p>Robinson Raju Varghese</p>
        </div>
      </div>
    </div>
    <ul class="social-links">
        
        <li>
        <a href="https://linkedin.com/in/robinsonraju" rel="me" aria-label="Linkedin">
          <i class="fa fa-2x fa-linkedin" aria-hidden="true"></i>
        </a>          
        </li>

        
        <li>
        <a href="https://github.com/robinsonraju" rel="me" aria-label="GitHub">
          <i class="fa fa-2x fa-github" aria-hidden="true"></i>
        </a>          
        </li>

        
        <li>
        <a href="https://instagram.com/luminous_infinitus" rel="me" aria-label="instagram">
          <i class="fa fa-2x fa-instagram" aria-hidden="true"></i>
        </a>          
        </li>

        
        <li>
        <a href="mailto:robinson.raju@gmail.com" rel="me" aria-label="e-mail">
          <i class="fa fa-2x fa-envelope" aria-hidden="true"></i>
        </a>          
        </li>

        
    </ul>
    <div class="footer">
        <div class="by_farbox">&copy; Robinson Raju Varghese 2020 </div>
      </div>
    </div>
</div><div class="main">
            <div class="page-top animated fadeInDown">
    <ul class="nav">
        
        
        
        <li><a  href="/" title="">Home</a></li>
        
        
        <li><a  href="/categories/blog/" title="">Blog</a></li>
        
        
        <li><a  href="/about/" title="About">About</a></li>
        
    </ul>
    
</div>

            <div class="autopagerize_page_element">
                <div class="content">
<div class="post animated fadeInDown">
  <div class="divTable">
    <div class="divTableBody">
      <div class="divTableRow">
        <main>
          <div class="divTableCell" >
            <div class="post-content">
              <div class="post-title">
                <h3>Automating the Hugo build and push to GitHub</h3>
                  
                    <h4></h4>
                    <div class="info">
                      <i class="fa fa-sun-o"></i><span class="date">Sat, May 23, 2020</span>
                      <i class="fa fa-clock-o"></i><span class="reading-time">2-minute read</span>
                    </div>
                  
              </div>
              <p>Instead of remembering to build and push to GitHub, wanted to automate it. The steps are simple enough to write a script and have a cron job execute it.</p>
<p>The <a href="/tech-notes/2020-05-04-setting-up-hugo-site/#3-deploying-to-github-pages">steps</a> from the post on <a href="/tech-notes/2020-05-04-setting-up-hugo-site/">Setting up hugo site and publishing to github</a> are below</p>
<pre><code>cd &lt;site directory&gt;

hugo

cd &lt;user&gt;.github.io

git add .

git commit -m &quot;Regenerate Site&quot;

git push
</code></pre><p>The process is pretty simple. Got to know that <strong><code>crontab</code></strong> was deprecated and <strong><code>launchd</code></strong> was the preferred way to go. There are only 2 steps.</p>
<ol>
<li>Create a property list (plist) XML giving it details like label and program arguments.</li>
<li>Put the plist file in <strong><code>~/Library/LaunchAgents</code></strong>, load and start the job.</li>
</ol>
<h2 id="defining-the-job">Defining the Job</h2>
<p>First step in this is to create a script that you can run.</p>
<p>I created <strong><code>gitpush.sh</code></strong> that could execute all the steps above. One thing that didn&rsquo;t work was <code>hugo</code> command. Had to change to include the full path. <strong><code>/usr/local/Cellar/hugo/0.69.2/bin/hugo</code></strong>.</p>
<p>Once the script is created, tested it is time to define the job by creating a plist.
A sample plist XML is available in the <a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/ScheduledJobs.html">Apple Developer Website for Scheduling Timed Jobs</a>.</p>
<pre><code>&lt;... copy this portion from reference&gt;

&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;io.github.robinsonraju&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/Users/.../gitpush.sh&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;StartInterval&lt;/key&gt;
    &lt;integer&gt;86400&lt;/integer&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre><p>Things configured above -</p>
<ul>
<li><strong>Label <!-- raw HTML omitted --></strong> : Unique identifier of the job.</li>
<li><strong>ProgramArguments <!-- raw HTML omitted --></strong> : Give the script to run here.</li>
<li><strong>StartInterval <!-- raw HTML omitted --></strong> : This is used to run the job every N seconds. The above example runs every day. Another option is to use <code>StartCalendarInterval</code> which has the ability to schedule on specific days.</li>
</ul>
<h2 id="loading-and-running-the-job">Loading and running the Job</h2>
<p><strong>Loading the job</strong></p>
<pre><code>launchctl load /Library/LaunchAgents/&lt;LABEL&gt;.plist
</code></pre><p><strong>Starting the job</strong></p>
<pre><code>launchctl start &lt;LABEL&gt;
</code></pre><p><strong>Stopping the job</strong></p>
<pre><code>launchctl stop &lt;LABEL&gt;
</code></pre><p><strong>Unloading a job</strong></p>
<pre><code>launchctl unload /Library/LaunchAgents/&lt;LABEL&gt;.plist
</code></pre><p>That&rsquo;s it.</p>
<p>I had some difficulty in running it initially and it had errored out with code 78. You can either use Mac&rsquo;s <code>console</code> app to look at the system.log or configure <code>StandardOutPath</code> &amp;  <code>StandardErrorPath</code> in the plist to direct the logs to another place of your liking. Also, my initial progam argument string was <code>source /Users/.../gitpush.sh</code>. Then found that it was not needed and I could just give the shell script.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/ScheduledJobs.html">Apple Developer Website for Scheduling Timed Jobs</a></li>
<li><a href="https://ss64.com/osx/launchctl.html">launchctl man page</a></li>
</ul>

            </div>
            <div class="post-footer">
              <div class="info">
                
<span class="separator"><a class="category" href="/categories/technical-notes/">Technical Notes</a><a class="category" href="/categories/blog/">Blog</a></span>

                
              </div>
            </div>
              
          </div>
          <nav class="divTableCell section-nav">
            <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="https://robinsonraju.info/tech-notes/2020-05-23-automating-build-n-push/#defining-the-job">Defining the Job</a></li>
    <li><a href="https://robinsonraju.info/tech-notes/2020-05-23-automating-build-n-push/#loading-and-running-the-job">Loading and running the Job</a></li>
    <li><a href="https://robinsonraju.info/tech-notes/2020-05-23-automating-build-n-push/#references">References</a></li>
  </ul>
</nav>
            </div>
          </nav>
        </main>
      </div>
    </div>
  </div>
</div>


                </div>
            </div>
        </div>
</body>



<script type="text/javascript" src="https://robinsonraju.info/js/jquery.min.86b1e8f819ee2d9099a783e50b49dff24282545fc40773861f9126b921532e4c.js" integrity="sha256-hrHo&#43;BnuLZCZp4PlC0nf8kKCVF/EB3OGH5EmuSFTLkw=" crossorigin="anonymous"></script>




<script type="text/javascript" src="https://robinsonraju.info/js/bundle.min.0f9c74cb78f13d1f15f33daff4037c70354f98acfbb97a6f61708966675c3cae.js" integrity="sha256-D5x0y3jxPR8V8z2v9AN8cDVPmKz7uXpvYXCJZmdcPK4=" crossorigin="anonymous"></script>

<script type="text/javascript" src="https://robinsonraju.info/js/medium-zoom.min.92f21c856129f84aeb719459b3e6ac621a3032fd7b180a18c04e1d12083f8aba.js" integrity="sha256-kvIchWEp&#43;ErrcZRZs&#43;asYhowMv17GAoYwE4dEgg/iro=" crossorigin="anonymous"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-166342905-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</html></body>

</html>
